HOW TO CREATE A FLUENT CONTROL METHOD WITH API CHANNEL ACTION
================================================================

PROBLEM: The "demo" method completes immediately and doesn't open an API channel for PyFluent communication.

SOLUTION: Create/modify a method in FluentControl that includes an "API Channel" action.

VERY IMPORTANT: Without an API Channel action, methods complete immediately and PyFluent cannot send commands!

METHOD 1: CREATE A NEW METHOD WITH API CHANNEL
===============================================

1. Open FluentControl (in simulation mode)

2. Click "Methods" tab in the main window

3. Click "New Method" button (or right-click in method list)

4. Name it: "PyFluent_API_Channel" (or similar)

5. In the Method Editor window:
   a. OPTION 1 (Simple - RECOMMENDED): Add ONLY an "API Channel" action:
      - Find "API Channel" in the actions list
      - Add it to your method sequence
      - Configure it as:
        * Action: "Start API Channel"
        * Mode: "Wait Indefinitely" or "Loop"
      - No other actions needed!

   b. OPTION 2 (With actions): Add basic actions first (like "Move" or "Tip Pick Up"), then add the API Channel action as above.

   IMPORTANT: The API Channel action must be configured to run continuously, not just once!

6. Save the method (Ctrl+S)

7. The method should now appear in PyFluent's available methods list

METHOD 2: MODIFY EXISTING "DEMO" METHOD
=======================================

1. Open FluentControl

2. Go to Methods tab

3. Find and open the "demo" method

4. In the method editor:
   a. Add an "API Channel" action as described above
   b. Make sure it's set to run continuously (not just once)

5. Save the method

METHOD 3: CHECK WHAT ACTIONS ARE IN YOUR METHOD
===============================================

To verify your method has API Channel action:

1. Open the method in FluentControl's method editor

2. Look at the action sequence

3. You should see "API Channel" action that runs indefinitely

4. If you don't see it, add it!

WHY THIS IS NECESSARY
======================

- Normal methods complete immediately after their actions finish
- API Channel action keeps the method running indefinitely
- This allows PyFluent to send real-time commands during execution
- Without it, the method ends and the communication channel closes

TESTING THE METHOD
==================

After creating/modifying the method:

1. Run: python tests/find_suitable_method.py
2. The new method should appear in the list
3. Run: python tests/run_protocol_simulation.py
4. The method should stay running and accept PyFluent commands

If the method still completes immediately, double-check that the API Channel action is configured to run indefinitely!

IMPORTANT NOTE
==============

You do NOT need to add aspiration/dispense actions! A method with ONLY an API Channel action should work, similar to how non-simulation mode works. The API Channel action opens the communication channel, and PyFluent can then send commands to control the robot.
